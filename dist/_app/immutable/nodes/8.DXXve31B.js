import{t as u,a as c}from"../chunks/MWlUta9F.js";import"../chunks/Cr08z2C_.js";import{p as Re,c as Ue,e as a,d as t,s as De,m as Ie,g as ze,r as s,t as Be,V as Le}from"../chunks/KEtZLwNl.js";import{s as i,e as U}from"../chunks/DsHZA0Ws.js";import{i as te}from"../chunks/DMs4V4P0.js";import{a as Pe}from"../chunks/CNuxGUW-.js";import{s as D}from"../chunks/DJJMutK-.js";import{i as Ae}from"../chunks/BD252RSB.js";import{s as He,a as m}from"../chunks/DdHiL5A6.js";import{o as Ne,b as Oe}from"../chunks/BD5oiptb.js";import{f as Ye,R as x,s as Ge}from"../chunks/Hm5LeLRE.js";import{g as qe}from"../chunks/BqHfDuCH.js";import{C as Ve}from"../chunks/BVEi7BbD.js";import{d as se,w as ae,g as Fe}from"../chunks/CwywfGhi.js";var Je=u('<div class="flex flex-col items-center justify-center p-6 svelte-feh0db"><div class="w-16 h-16 relative mb-6 svelte-feh0db"><div class="absolute top-0 left-0 w-full h-full border-4 border-purple-500/20 rounded-full svelte-feh0db"></div> <div class="absolute top-0 left-0 w-full h-full border-4 border-b-transparent border-r-transparent border-purple-500 rounded-full animate-spin svelte-feh0db"></div></div> <p class="text-purple-300 font-medium text-lg svelte-feh0db">Loading timer</p> <div class="mt-2 flex space-x-1.5 svelte-feh0db"><span class="w-2 h-2 bg-purple-400 rounded-full animate-bounce svelte-feh0db" style="animation-delay: 0s;"></span> <span class="w-2 h-2 bg-purple-400 rounded-full animate-bounce svelte-feh0db" style="animation-delay: 0.2s;"></span> <span class="w-2 h-2 bg-purple-400 rounded-full animate-bounce svelte-feh0db" style="animation-delay: 0.4s;"></span></div></div>'),Ke=u('<button class="w-full bg-gradient-to-br from-red-500 to-red-600 py-4 px-6 rounded-lg font-medium text-white shadow-md transition-all duration-300 hover:shadow-red-500/20 active:scale-98 cursor-pointer svelte-feh0db" type="button" aria-label="Pause timer"><span class="flex items-center justify-center svelte-feh0db"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 svelte-feh0db" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><rect x="6" y="4" width="4" height="16" rx="1" class="svelte-feh0db"></rect><rect x="14" y="4" width="4" height="16" rx="1" class="svelte-feh0db"></rect></svg> Pause</span></button>'),Qe=u('<button class="w-full bg-gradient-to-br from-teal-500 to-cyan-600 py-4 px-6 rounded-lg font-medium text-white shadow-md transition-all duration-300 hover:shadow-teal-500/20 active:scale-98 cursor-pointer svelte-feh0db" type="button" aria-label="Start timer"><span class="flex items-center justify-center svelte-feh0db"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 svelte-feh0db" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" class="svelte-feh0db"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" class="svelte-feh0db"></path></svg> Start</span></button>'),We=u(`<div class="stopwatch-container w-full max-w-md mx-auto rounded-2xl overflow-hidden shadow-2xl bg-gradient-to-b from-gray-900 to-gray-800 border border-gray-700/50 my-4 md:my-0 svelte-feh0db"><div class="p-4 border-b border-gray-700/50 relative overflow-hidden svelte-feh0db"><div class="relative z-10 svelte-feh0db"><h2 class="text-xl font-semibold text-white text-center tracking-wide svelte-feh0db">STUDY TIMER</h2> <p class="text-center text-purple-300/80 text-sm mt-1 font-light tracking-wider uppercase svelte-feh0db">Track Your Daily Study Time</p></div></div> <div class="py-12 px-4 flex justify-center items-center relative svelte-feh0db"><div class="absolute inset-0 flex items-center justify-center pointer-events-none svelte-feh0db"><div class="w-56 h-56 rounded-full border border-purple-500/10 svelte-feh0db"></div></div> <div class="relative svelte-feh0db"><div></div> <div class="relative w-48 h-48 pt-10 rounded-full flex flex-col items-center justify-center bg-gray-800/80 shadow-inner border border-gray-700/50 svelte-feh0db"><div class="flex items-center justify-center space-x-2 svelte-feh0db"><div class="w-16 text-center svelte-feh0db"><span class="text-4xl font-bold text-white svelte-feh0db"> </span></div> <div class="svelte-feh0db"><span>:</span></div> <div class="w-16 text-center svelte-feh0db"><span class="text-4xl font-bold text-white svelte-feh0db"> </span></div></div> <div class="text-xs text-gray-400 mt-5 font-mono svelte-feh0db"> </div> <div class="mt-6 flex items-center justify-center svelte-feh0db"><div></div> <span class="ml-2 text-xs text-gray-400 svelte-feh0db"> </span></div></div></div></div> <div class="px-6 py-4 bg-gray-900/50 svelte-feh0db"><div class="mb-6 svelte-feh0db"><div class="text-xs text-gray-400 mb-2 flex justify-between items-center svelte-feh0db"><span class="font-light svelte-feh0db">TODAY'S PROGRESS</span> <span class="font-mono text-teal-300 svelte-feh0db"> </span></div> <div class="w-full h-2 bg-gray-800/80 rounded-full overflow-hidden svelte-feh0db"><div class="h-full rounded-full transition-all duration-1000 ease-out bg-gradient-to-r from-teal-500 to-cyan-500 svelte-feh0db"></div></div></div> <div class="flex flex-col gap-3 svelte-feh0db"><!> <button type="button" aria-label="Edit timer" class="w-full py-4 px-6 rounded-lg bg-gray-800/60 border border-gray-700/50 text-gray-300 hover:text-teal-200 font-medium transition-all duration-300 hover:bg-gray-700/50 cursor-pointer svelte-feh0db"><span class="flex items-center justify-center svelte-feh0db"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2 text-teal-400 svelte-feh0db" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" class="svelte-feh0db"></path></svg> Edit Timer</span></button></div></div> <div class="px-6 py-4 border-t border-gray-700/30 bg-gray-900/70 svelte-feh0db"><div class="flex justify-between items-center mb-2 svelte-feh0db"><div class="text-xs text-gray-500 svelte-feh0db">Session Time</div> <div class="text-teal-300 font-mono svelte-feh0db"> </div></div> <div class="flex justify-between items-center svelte-feh0db"><div class="text-xs text-gray-500 svelte-feh0db">Total Today</div> <div class="text-teal-300 font-mono svelte-feh0db"> </div></div></div></div>`),Xe=u('<div class="flex items-center justify-center p-2 w-full h-full min-h-screen bg-gradient-to-b from-gray-900 via-gray-900 to-gray-800 overflow-hidden svelte-feh0db"><div class="fixed top-0 right-0 w-96 h-96 rounded-full bg-purple-600/5 blur-3xl svelte-feh0db"></div> <div class="fixed bottom-0 left-0 w-96 h-96 rounded-full bg-indigo-600/5 blur-3xl svelte-feh0db"></div> <!></div>');function ut(re,le){Re(le,!1);const[b,de]=He(),v=()=>m(y,"$running",b),ie=()=>m(ne,"$minutes",b),oe=()=>m(ve,"$seconds",b),g=()=>m(n,"$stopwatchTime",b);let I,z=[],o,w=0,y=ae(!1),p,B=Ie(!0),n=ae(w*60);const ne=se(n,e=>Math.floor(e/60)),ve=se(n,e=>e%60);Ne(async()=>{try{I=await Ve(),z=await Ye(),o=z.filter(e=>e.Owner===I.id)[0],w=o.Time_Today,n.set(w*60)}catch(e){console.error("Error loading data:",e)}finally{setTimeout(()=>{De(B,!1)},800)}}),Oe(()=>{p&&clearInterval(p)});const fe=e=>{const l=x(e/3600),f=x(e%3600/60),h=e%60;return`${String(l).padStart(2,"0")}:${String(f).padStart(2,"0")}:${String(h).padStart(2,"0")}`},ce=()=>{y.set(!0),p=setInterval(()=>{n.update(e=>e+1)},1e3)},ue=()=>{y.set(!1),clearInterval(p);const e=x(Fe(n)/60);o.Time_Today=e,console.log("Updated Time:",o.Time_Today),Ge.update(o.id,o)},be=()=>{qe("/dashboard/timer/edit")};function _(e){return setTimeout(()=>{e==="start"?ce():e==="pause"?ue():e==="edit"&&be()},10),!1}Ae();var S=Xe(),pe=a(t(S),4);{var he=e=>{var l=Je();c(e,l)},me=e=>{var l=We(),f=a(t(l),2),h=a(t(f),2),L=t(h),P=a(L,2),T=t(P),k=t(T),A=t(k),xe=t(A,!0);s(A),s(k);var j=a(k,2),ge=t(j);s(j);var H=a(j,2),N=t(H),we=t(N,!0);s(N),s(H),s(T);var $=a(T,2),ye=t($,!0);s($);var O=a($,2),Y=t(O),G=a(Y,2),_e=t(G,!0);s(G),s(O),s(P),s(h),s(f);var M=a(f,2),E=t(M),C=t(E),q=a(t(C),2),Se=t(q);s(q),s(C);var V=a(C,2),Te=t(V);s(V),s(E);var F=a(E,2),J=t(F);{var ke=r=>{var d=Ke();U("click",d,()=>_("pause")),c(r,d)},je=r=>{var d=Qe();U("click",d,()=>_("start")),c(r,d)};te(J,r=>{v()?r(ke):r(je,!1)})}var $e=a(J,2);s(F),s(M);var K=a(M,2),R=t(K),Q=a(t(R),2),Me=t(Q,!0);s(Q),s(R);var W=a(R,2),X=a(t(W),2),Ee=t(X);s(X),s(W),s(K),s(l),Be((r,d,Z,ee,Ce)=>{D(L,1,`absolute inset-0 rounded-full ${v()?"border-2 border-purple-500/30 shadow-lg shadow-purple-500/10":"border border-gray-600/30"} transition-all duration-700`,"svelte-feh0db"),i(xe,r),D(ge,1,`text-4xl font-bold text-white ${v()?"animate-pulse-slow":""}`,"svelte-feh0db"),i(we,d),i(ye,Z),D(Y,1,`w-2 h-2 rounded-full ${v()?"bg-teal-500 animate-pulse-slow":"bg-gray-600"}`,"svelte-feh0db"),i(_e,v()?"RUNNING":"PAUSED"),i(Se,`${ee??""} min`),Pe(Te,"style",`width: ${Ce??""}%`),i(Me,Z),i(Ee,`${ee??""} min`)},[()=>String(ie()).padStart(2,"0"),()=>String(oe()).padStart(2,"0"),()=>fe(g()),()=>x(g()/60),()=>Math.min(100,g()/60/10*100)],Le),U("click",$e,()=>_("edit")),c(e,l)};te(pe,e=>{ze(B)?e(he):e(me,!1)})}s(S),c(re,S),Ue(),de()}export{ut as component};
