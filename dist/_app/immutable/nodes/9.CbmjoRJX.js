import{c as Et,a as w,t as A,e as at}from"../chunks/MWlUta9F.js";import"../chunks/Cr08z2C_.js";import{p as St,f as Ct,c as Lt,s as C,m as D,g as c,d,e as y,r as f,t as X,V as rt}from"../chunks/KEtZLwNl.js";import{s as z,e as L}from"../chunks/DsHZA0Ws.js";import{i as P}from"../chunks/DMs4V4P0.js";import{r as jt,s as Rt}from"../chunks/CNuxGUW-.js";import{r as it,l as Ut,t as Z,s as Dt,f as nt}from"../chunks/PPND2hhZ.js";import{b as lt}from"../chunks/Bv6KFKnI.js";import{i as Nt}from"../chunks/BD252RSB.js";import{s as Yt,a as $t}from"../chunks/DdHiL5A6.js";import{o as It}from"../chunks/BD5oiptb.js";import{C as qt}from"../chunks/BVEi7BbD.js";import{f as At,s as Bt,R as q}from"../chunks/Hm5LeLRE.js";import{N as tt}from"../chunks/BdqMmB67.js";import{g as Ot}from"../chunks/BqHfDuCH.js";import{w as Vt}from"../chunks/CwywfGhi.js";function ct(t){return Math.sqrt(1- --t*t)}function dt(t){return Object.prototype.toString.call(t)==="[object Date]"}function et(t,T,s,x){if(typeof s=="number"||dt(s)){const o=x-s,i=(s-T)/(t.dt||1/60),b=t.opts.stiffness*o,l=t.opts.damping*i,u=(b-l)*t.inv_mass,m=(i+u)*t.dt;return Math.abs(m)<t.opts.precision&&Math.abs(o)<t.opts.precision?x:(t.settled=!1,dt(s)?new Date(s.getTime()+m):s+m)}else{if(Array.isArray(s))return s.map((o,i)=>et(t,T[i],s[i],x[i]));if(typeof s=="object"){const o={};for(const i in s)o[i]=et(t,T[i],s[i],x[i]);return o}else throw new Error(`Cannot spring ${typeof s} values`)}}function Wt(t,T={}){const s=Vt(t),{stiffness:x=.15,damping:o=.8,precision:i=.01}=T;let b,l,u,m=t,M=t,g=1,N=0,p=!1;function Y(j,v={}){M=j;const F=u={};return t==null||v.hard||_.stiffness>=1&&_.damping>=1?(p=!0,b=it.now(),m=j,s.set(t=M),Promise.resolve()):(v.soft&&(N=1/((v.soft===!0?.5:+v.soft)*60),g=0),l||(b=it.now(),p=!1,l=Ut(k=>{if(p)return p=!1,l=null,!1;g=Math.min(g+N,1);const B=Math.min(k-b,1e3/30),$={inv_mass:g,opts:_,settled:!0,dt:B*60/1e3},G=et($,m,t,M);return b=k,m=t,s.set(t=G),$.settled&&(l=null),!$.settled})),new Promise(k=>{l.promise.then(()=>{F===u&&k()})}))}const _={set:Y,update:(j,v)=>Y(j(M,t),v),subscribe:s.subscribe,stiffness:x,damping:o,precision:i};return _}var zt=A(`<div class="relative w-full aspect-square bg-gray-700 rounded-full border-4 border-gray-600 
								   flex items-center justify-center select-none cursor-pointer touch-none"><div class="text-center"><p class="text-gray-300 text-lg mb-2">Time Spent Today</p> <div class="text-6xl font-bold text-teal-400"> </div> <p class="text-gray-400 text-lg mt-2"> </p></div></div>`),Pt=A(`<div><label for="timeInput" class="block text-sm font-medium text-gray-300 mb-2">Time Spent Today (minutes)</label> <input id="timeInput" type="number" min="0" max="1440" class="w-full bg-gray-700 border border-gray-600 rounded-lg p-3 text-white 
									   focus:ring-2 focus:ring-teal-500 focus:outline-none 
									   transition duration-300 ease-in-out text-lg svelte-kv2rey"></div>`),Ft=A(`<button class="w-full bg-gray-700 hover:bg-gray-600 text-white font-bold 
								   py-3 px-4 rounded-lg transition duration-300 ease-in-out 
								   transform hover:scale-[1.02] active:scale-[0.98]">Return to Dashboard</button>`),Gt=A(`<div class="flex items-center justify-center min-h-screen px-4 py-6 bg-gray-900 overflow-y-auto" style="width: 100vw; height: 100vh; overflow-y: auto;"><div class="w-full max-w-md bg-gray-800 rounded-2xl shadow-2xl border border-gray-700 overflow-hidden"><div class="p-6"><h1 class="text-2xl font-bold text-teal-400 mb-6 text-center tracking-tight">Update Daily Time</h1> <div class="space-y-4"><!> <p class="text-center text-gray-400 text-sm"><!></p> <div class="flex space-x-2"><button class="flex-1 bg-gray-700 hover:bg-gray-600 text-white font-bold 
								   py-3 px-4 rounded-lg transition duration-300 ease-in-out 
								   transform hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50"> </button> <button class="flex-1 bg-gray-700 hover:bg-gray-600 text-white font-bold 
								   py-3 px-4 rounded-lg transition duration-300 ease-in-out 
								   transform hover:scale-[1.02] active:scale-[0.98]">Reset</button></div> <button class="w-full bg-teal-600 hover:bg-teal-700 text-white font-bold py-3 px-4 
							   rounded-lg transition duration-300 ease-in-out transform 
							   hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed"> </button> <!></div></div></div></div>`),Ht=A('<div class="flex items-center justify-center min-h-screen bg-gray-900 text-white"><div class="text-center"><svg class="animate-spin h-10 w-10 mx-auto text-teal-400 mb-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> <p class="text-lg text-gray-300">Loading your data...</p></div></div>');function fe(t,T){St(T,!1);const[s,x]=Yt(),o=()=>$t(u,"$timeToday",s);let i,b,l,u=Wt(0,{stiffness:.1,damping:.3}),m=0,M=D(!0),g=D(!1),N=D(!1),p=D(!1),Y=D(),_=D();It(async()=>{try{i=await qt(),b=await At(),l=b.find(e=>e.Owner===i.id),u.set(l.Time_Today),m=l.Time_Today}catch(e){console.error("Error loading data:",e),tt("Failed to load user data",3e3,"error")}finally{C(M,!1)}});async function j(){if(c(g))try{l.Time_Today=o(),await Bt.update(l.id,l),tt("Time Updated Successfully"),C(N,!0),m=o(),C(g,!1)}catch(e){console.error(e),tt("Error Updating Time",3e3,"error")}}function v(){C(g,o()!==m&&o()>=0&&o()<=1440)}function F(){Ot("/dashboard/timer")}function k(e){const n=q(e/60),h=q(e%60);return n>0?`${n} hr ${h} min`:`${e} min`}function B(e){e.preventDefault();let n=0;if(e instanceof WheelEvent)n=e.deltaY>0?-1:1;else if(e instanceof TouchEvent){const O=e.touches[0].clientY,R=H=>{const J=H.touches[0].clientY;n=q(O-J)>0?-1:1,u.set(q(Math.min(Math.max(0,o()+n),1440))),v(),document.removeEventListener("touchmove",R),document.removeEventListener("touchend",U)},U=()=>{document.removeEventListener("touchmove",R),document.removeEventListener("touchend",U)};document.addEventListener("touchmove",R),document.addEventListener("touchend",U);return}u.set(q(Math.min(Math.max(0,o()+n),1440))),v()}function $(){u.set(m),v()}function G(){C(p,!c(p)),c(p)&&setTimeout(()=>{var e;return(e=c(_))==null?void 0:e.focus()},100)}function ft(e){const n=e.target,h=parseInt(n.value);!isNaN(h)&&h>=0&&h<=1440&&(u.set(h),v())}Nt();var st=Et(),mt=Ct(st);{var ut=e=>{var n=Gt(),h=d(n),O=d(h),R=y(d(O),2),U=d(R);{var H=r=>{var a=zt(),E=d(a),S=y(d(E),2),Tt=d(S,!0);f(S);var ot=y(S,2),Mt=d(ot,!0);f(ot),f(E),f(a),lt(a,Q=>C(Y,Q),()=>c(Y)),X((Q,kt)=>{z(Tt,Q),z(Mt,kt)},[()=>Math.round(o()),()=>k(Math.round(o()))],rt),L("wheel",a,B),L("touchmove",a,B),w(r,a)},J=r=>{var a=Pt(),E=y(d(a),2);jt(E),lt(E,S=>C(_,S),()=>c(_)),f(a),X(S=>Rt(E,S),[()=>Math.round(o())],rt),L("input",E,ft),w(r,a)};P(U,r=>{c(p)?r(J,!1):r(H)})}var V=y(U,2),vt=d(V);{var ht=r=>{var a=at("Scroll/Swipe to adjust time (0-1440 mins)");w(r,a)},gt=r=>{var a=at("Manually enter time in minutes");w(r,a)};P(vt,r=>{c(p)?r(gt,!1):r(ht)})}f(V);var K=y(V,2),W=d(K),bt=d(W,!0);f(W);var yt=y(W,2);f(K);var I=y(K,2),xt=d(I,!0);f(I);var _t=y(I,2);{var wt=r=>{var a=Ft();L("click",a,F),Z(3,a,()=>nt),w(r,a)};P(_t,r=>{c(N)&&r(wt)})}f(R),f(O),f(h),f(n),X(()=>{z(bt,c(p)?"Wheel Mode":"Text Mode"),I.disabled=!c(g),z(xt,c(g)?"Save Changes":"No Changes")}),L("click",W,G),L("click",yt,$),L("click",I,j),Z(3,h,()=>Dt,()=>({duration:300,easing:ct})),Z(3,n,()=>nt,()=>({duration:300,easing:ct})),w(e,n)},pt=e=>{var n=Ht();w(e,n)};P(mt,e=>{c(M)?e(pt,!1):e(ut)})}w(t,st),Lt(),x()}export{fe as component};
